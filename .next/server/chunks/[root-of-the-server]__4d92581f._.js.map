{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/user/bzionupd/src/app/api/monitoring/web-vitals/route.ts"],"sourcesContent":["/**\n * Web Vitals API Route\n * Receives and processes Web Vitals metrics from clients\n */\n\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport interface WebVitalsReport {\n  name: string\n  value: number\n  rating: 'good' | 'needs-improvement' | 'poor'\n  delta: number\n  id: string\n  url: string\n  timestamp: number\n  userAgent: string\n  sessionId: string\n}\n\n/**\n * POST /api/monitoring/web-vitals\n * Receive Web Vitals metrics from clients\n */\nexport async function POST(request: NextRequest) {\n  try {\n    const metric: WebVitalsReport = await request.json()\n\n    // Validate required fields\n    if (!metric.name || metric.value === undefined || !metric.sessionId) {\n      return NextResponse.json(\n        { error: 'Missing required fields' },\n        { status: 400 }\n      )\n    }\n\n    // Log metric (in production, send to monitoring service)\n    console.log(`[Web Vitals] ${metric.name}:`, {\n      value: `${metric.value.toFixed(2)}ms`,\n      rating: metric.rating,\n      url: metric.url,\n      sessionId: metric.sessionId,\n    })\n\n    // Store metric (you can implement database storage here)\n    // await storeWebVital(metric)\n\n    // Send to external monitoring service (e.g., Datadog, New Relic)\n    // await sendToMonitoringService(metric)\n\n    // Return success response\n    return NextResponse.json(\n      { success: true, id: metric.id },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('[Web Vitals API] Error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * GET /api/monitoring/web-vitals\n * Retrieve aggregated Web Vitals metrics\n */\nexport async function GET(request: NextRequest) {\n  try {\n    // Add authentication check here\n    const authHeader = request.headers.get('authorization')\n    if (!authHeader) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    // Retrieve metrics from storage\n    // const metrics = await getWebVitalsMetrics()\n\n    const metrics = {\n      totalRequests: 0,\n      avgLCP: 0,\n      avgFID: 0,\n      avgCLS: 0,\n      avgTTFB: 0,\n      poorMetrics: [],\n    }\n\n    return NextResponse.json(metrics, { status: 200 })\n  } catch (error) {\n    console.error('[Web Vitals API] Error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAED;;AAkBO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,SAA0B,MAAM,QAAQ,IAAI;QAElD,2BAA2B;QAC3B,IAAI,CAAC,OAAO,IAAI,IAAI,OAAO,KAAK,KAAK,aAAa,CAAC,OAAO,SAAS,EAAE;YACnE,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,yDAAyD;QACzD,QAAQ,GAAG,CAAC,CAAC,aAAa,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE;YAC1C,OAAO,GAAG,OAAO,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;YACrC,QAAQ,OAAO,MAAM;YACrB,KAAK,OAAO,GAAG;YACf,WAAW,OAAO,SAAS;QAC7B;QAEA,yDAAyD;QACzD,8BAA8B;QAE9B,iEAAiE;QACjE,wCAAwC;QAExC,0BAA0B;QAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAM,IAAI,OAAO,EAAE;QAAC,GAC/B;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF;AAMO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,gCAAgC;QAChC,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QACvC,IAAI,CAAC,YAAY;YACf,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAe,GACxB;gBAAE,QAAQ;YAAI;QAElB;QAEA,gCAAgC;QAChC,8CAA8C;QAE9C,MAAM,UAAU;YACd,eAAe;YACf,QAAQ;YACR,QAAQ;YACR,QAAQ;YACR,SAAS;YACT,aAAa,EAAE;QACjB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}