{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/user/bzionupd/src/app/api/monitoring/errors/route.ts"],"sourcesContent":["/**\n * Error Logging API Route\n * Receives and processes error logs from clients\n */\n\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport interface ErrorLogReport {\n  id: string\n  message: string\n  stack?: string\n  context?: Record<string, any>\n  severity: 'info' | 'warning' | 'error' | 'critical'\n  timestamp: number\n  url: string\n  userAgent: string\n  sessionId: string\n  userId?: string\n  breadcrumbs: Array<{\n    message: string\n    timestamp: number\n    category: string\n    data?: Record<string, any>\n  }>\n  sourceMap?: {\n    file: string\n    line: number\n    column: number\n  }\n  environment: string\n  version: string\n}\n\n/**\n * POST /api/monitoring/errors\n * Receive error logs from clients\n */\nexport async function POST(request: NextRequest) {\n  try {\n    const errorLog: ErrorLogReport = await request.json()\n\n    // Validate required fields\n    if (!errorLog.message || !errorLog.sessionId) {\n      return NextResponse.json(\n        { error: 'Missing required fields' },\n        { status: 400 }\n      )\n    }\n\n    // Determine if error should be logged based on severity\n    const shouldLog =\n      errorLog.severity === 'critical' ||\n      errorLog.severity === 'error' ||\n      (process.env.NODE_ENV === 'development' && errorLog.severity === 'warning')\n\n    if (shouldLog) {\n      console.error(`[Error Log] [${errorLog.severity.toUpperCase()}]`, {\n        id: errorLog.id,\n        message: errorLog.message,\n        url: errorLog.url,\n        sessionId: errorLog.sessionId,\n        userId: errorLog.userId,\n        timestamp: new Date(errorLog.timestamp).toISOString(),\n      })\n\n      // Log detailed info for critical errors\n      if (errorLog.severity === 'critical') {\n        console.error('[Error Details]', {\n          stack: errorLog.stack,\n          context: errorLog.context,\n          sourceMap: errorLog.sourceMap,\n          breadcrumbs: errorLog.breadcrumbs.slice(-5), // Last 5 breadcrumbs\n        })\n      }\n    }\n\n    // Store error log (you can implement database storage here)\n    // await storeErrorLog(errorLog)\n\n    // Send to external error tracking service (e.g., Sentry, Rollbar)\n    // await sendToErrorTrackingService(errorLog)\n\n    // Send alerts for critical errors\n    if (errorLog.severity === 'critical') {\n      // await sendAlert(errorLog)\n    }\n\n    // Return success response\n    return NextResponse.json(\n      { success: true, id: errorLog.id },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('[Error Logging API] Error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * GET /api/monitoring/errors\n * Retrieve error logs (with authentication)\n */\nexport async function GET(request: NextRequest) {\n  try {\n    // Add authentication check here\n    const authHeader = request.headers.get('authorization')\n    if (!authHeader) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    // Query parameters for filtering\n    const { searchParams } = new URL(request.url)\n    const limit = parseInt(searchParams.get('limit') || '50', 10)\n\n    // Retrieve error logs from storage\n    // const errors = await getErrorLogs({ severity, sessionId, limit })\n\n    const errors = {\n      total: 0,\n      limit,\n      errors: [],\n    }\n\n    return NextResponse.json(errors, { status: 200 })\n  } catch (error) {\n    console.error('[Error Logging API] Error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * DELETE /api/monitoring/errors/:id\n * Delete an error log (with authentication)\n */\nexport async function DELETE(request: NextRequest) {\n  try {\n    // Add authentication check here\n    const authHeader = request.headers.get('authorization')\n    if (!authHeader) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const id = request.nextUrl.pathname.split('/').pop()\n    if (!id) {\n      return NextResponse.json(\n        { error: 'Missing error ID' },\n        { status: 400 }\n      )\n    }\n\n    // Delete error log from storage\n    // await deleteErrorLog(id)\n\n    return NextResponse.json(\n      { success: true, id },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('[Error Logging API] Error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}